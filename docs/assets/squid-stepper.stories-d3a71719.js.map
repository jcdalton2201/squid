{"version":3,"file":"squid-stepper.stories-d3a71719.js","sources":["../../dist/squid-stepper/squid-stepper.js"],"sourcesContent":["import { css, html } from 'lit';\nimport { BaseElement } from '../utils/baseElement.js';\nimport { defineSquidElement } from '../utils/defineSquidElement.js';\n\nvar css_248z = css`#container label{color:var(--font-color-default,#4d4d4d);font-size:.75rem;letter-spacing:.5px;margin-bottom:.25rem .25rem .25rem .25rem;opacity:.9}#container .input{align-items:center;display:flex;font-size:1rem;text-align:center}#container .input button{align-items:center;border:1px solid #1a1a1a;border-radius:50%;cursor:pointer;display:flex;height:30px;justify-content:center;width:30px}#container .input button.disabled{background-color:#b3b3b3;cursor:not-allowed}#container .input button:hover{border-color:var(--color-primary-default,#0e307a)}#container .input button:focus{outline:1px auto #0d8bf2}`;\n\n/**\n * @tag squid-stepper\n * @summary The `SquidStepper` element to allow users to quickly specify a value within a given range.\n * @prop {String} name - Name of the form control. Submitted with the form as part of a name/value pair.\n * @prop {String} label - The label for the element and is visual at the top of the element.\n * @prop {String} value - The initial value of the control.\n * @event change - Event dispatch when the value has changed.\n * @example <squid-stepper name='stepper' label='Traveller Class' value='2'>\n    <option value='1'>First</option>\n    <option value='2'>Buisness</option>\n    <option value='3'>Coach</option>\n</squid-stepper>\n */\nclass SquidStepper extends BaseElement {\n    static get styles() {\n        return [css_248z];\n    }\n    static get properties() {\n        return {\n            name: { type: String, reflect: true },\n            label: {\n                type:String\n            },\n            value: {\n                type:String,\n                reflect: true\n            }\n        };\n    }\n    static get formAssociated(){\n        return true;\n    }\n    firstUpdated(){\n        this.buildRefs();\n        this._optionsObserver.observe(this, { childList: true });\n        if(!this.value){\n            this.value = this.optionsMap.keys().next().value;\n        }\n        this.__setValue();\n        this.__displayValue();\n        console.log(this.internals.form);\n    }\n    updated(){\n        this.__displayValue();\n    }\n    constructor() {\n        super();\n        this.internals = this.attachInternals();\n        this.bindMethods(['getOptions','increase','decrease','__displayValue','_manageOptions']);\n        this.getOptions();\n        this._optionsObserver = new MutationObserver(mutations => {\n            mutations.forEach(mutation => this._manageOptions(mutation));\n        });\n    }\n    getOptions(){\n        const options = [...this.querySelectorAll('option')].map(item => [item.value,item.text]);\n        this.optionsMap = new Map(options);\n        this.keys = [...this.optionsMap.keys()];\n        let maxLength = 0;\n        [...this.optionsMap.values()].forEach(item => {\n            if(item.length > maxLength){\n                maxLength = item.length;\n            }\n        });\n        this.displayLength = `${maxLength * 0.75}rem`;\n    }\n    _manageOptions(){\n        this.getOptions();\n        /*check to see if we have valid value*/\n        if(![...this.optionsMap.keys()].find(item => item === this.value)){\n            this.value = this.optionsMap.keys().next().value;\n        } \n        this.__displayValue();\n\n    }\n    __displayValue(){\n        const {increase, decrease} = this.refs;\n        let index = this.keys.indexOf(this.value);\n        decrease.classList.remove('disabled');\n        increase.classList.remove('disabled');\n        if(index === 0){\n            decrease.classList.add('disabled');\n        }\n        if(index === this.keys.length - 1 ){\n            increase.classList.add('disabled');\n        }\n        // render(html`${this.optionsMap.get(this.value)}`,valueInput);\n        // this.requestUpdate();\n    }\n    render(){\n        return html`\n        <div id=\"container\" data-ref=\"wrapper\">\n         <label class=\"stepper-label\" for=\"squid-stepper\" data-ref=\"label\">${this.label}</label>\n         <div class='input'>\n          <button class='decrease' data-ref='decrease' @click=${this.decrease} aria-label=\"decrease value\">\n          <svg aria-hidden=\"true\" \n                  focusable=\"false\"  \n                  data-icon=\"minus-circle\" \n                  role=\"img\"  \n                  viewBox=\"0 0 24 24\"\n                  height=\"18px\" \n                  class=\"minus-circle\"\n                  \n                  >\n                  <path d=\"M1.5 12A1.5 1.5 0 0 1 3 10.5h18a1.5 1.5 0 0 1 0 3H3A1.5 1.5 0 0 1 1.5 12z\"></path>\n          </svg>\n          </button>\n          <div class='value' data-ref='valueInput' style='width:${this.displayLength}'>${this.value}</div>\n          <button class='increase' @click=${this.increase} data-ref='increase' aria-label=\"increase value\">\n          <svg aria-hidden=\"true\" \n               focusable=\"false\" \n               data-icon=\"plus-circle\" \n               role=\"img\"  \n               viewBox=\"0 0 24 24\"\n               height=\"18px\" \n               class=\"plus-circle\">\n               <path d=\"M12 1.5A1.5 1.5 0 0 0 10.5 3v7.5H3a1.5 1.5 0 0 0 0 3h7.5V21a1.5 1.5 0 0 0 3 0v-7.5H21a1.5 1.5 0 0 0 0-3h-7.5V3A1.5 1.5 0 0 0 12 1.5z\"></path>\n            </path>\n          </svg>\n     </button>\n         </div>\n        </div>\n        `;\n    }\n    __setValue(){\n        this.internals.setFormValue(this.value);\n        this.dispatchEvent(new Event('change'));\n    }\n    increase(){\n        let index = this.keys.indexOf(this.value);\n        if(index < this.keys.length - 1){\n            this.value = this.keys[index + 1];\n            this.__displayValue();\n        }\n        \n        this.__setValue();\n    }\n    decrease(){\n        let index = this.keys.indexOf(this.value);\n        if(index > 0){\n            this.value = this.keys[index - 1];\n            this.__displayValue();\n        }\n        \n        this.__setValue();\n    }\n    /**\n     * Proxy input checkValidity\n     */\n    checkValidity() {\n        return true;\n    }\n    /**\n     * proxy input validity\n     */\n    validity() {\n        return true;\n    }\n    /**\n     * proxy input validationMessage\n     * @returns {String}\n     */\n    validationMessage() {\n        return '';\n    }\n    /**\n     * proxy input willValidate\n     * @returns {Boolean}\n     */\n    willValidate() {\n        return true;\n    }\n}\ndefineSquidElement('squid-stepper',SquidStepper);\n\nexport { SquidStepper };\n"],"names":["css_248z","css","SquidStepper","BaseElement","mutations","mutation","options","item","maxLength","increase","decrease","index","html","defineSquidElement"],"mappings":"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"}