{"version":3,"file":"squid-character-count.stories-4477219a.js","sources":["../../dist/squid-character-count/squid-character-count.js"],"sourcesContent":["import { css, html } from 'lit';\nimport { defineSquidElement } from '../utils/defineSquidElement.js';\nimport { findSahdowRoot } from '../utils/findShadowRoot.js';\nimport { BaseElement } from '../utils/baseElement.js';\n\nvar css_248z = css``;\n\n/**\r\n * @prop max {Number} - The denomenator in the current/total fraction. Reflected as a property.\r\n * @prop count {Number} - he current character count. Reflected as a property.\r\n * @prop id {String} - TheThe element's id, corresponds to the `aria-describedby` attribute on an `HTMLInputElement` in the same `DocumentOrShadowRoot`. The element will hook into this element and attach an event listener to look for changes. Reflected as a property.  \r\n * @tag squid-character-count\r\n * @summary The `SquidCharacterCount` is used to allow a user to track how many characters are still available in a given input.\r\n * @example <squid-character-count id=\"counter\" max=\"10\"></squid-character-count>\r\n         <input aria-describedby=\"counter\">\r\n*/\r\nclass SquidCharacterCount extends BaseElement {\r\n    static get styles() {\r\n        return [css_248z];\r\n    }\r\n    static get properties() {\r\n        return {\r\n            max:{type:Number},\r\n            count:{type:Number},\r\n            id:{type:String}\r\n        };\r\n    }\r\n    get id() {\r\n        return this._id;\r\n    }\r\n    set id(value) {\r\n        this._id = value;\r\n        const selector = `[aria-describedby=\"${value}\"]`;\r\n        const parentHost = findSahdowRoot(this);\r\n        if(parentHost) {\r\n            setTimeout(()=>{\r\n                this.describes = parentHost.querySelector('input');\r\n                if(this.describes === null){\r\n                    this.describes = parentHost.querySelector('textarea');\r\n                }\r\n                this._initInput(this.describes);\r\n            });\r\n        } else {\r\n            setTimeout(() => {\r\n                this.describes = document.querySelector(selector);\r\n                this._initInput(this.describes);\r\n                this.count = this.describes ? this.describes.value.length.toString():0;\r\n            });\r\n        }\r\n    }\r\n    render(){\r\n        return html`\r\n        <span class=\"form-field--info\" data-ref=\"counter\" aria-live=\"polite\">\r\n            <span data-ref=\"count\">${this.count}</span>/<span data-ref=\"limit\">${this.max}</span>\r\n        </span>\r\n        `;\r\n    }\r\n    _initInput(input) {\r\n        if(input) {\r\n            this.count = input.value.length.toString();\r\n            input.addEventListener('input',this._watchInput.bind(this));\r\n            this.max = this.max || input.maxLength;\r\n        }\r\n    }\r\n    _watchInput(evt) {\r\n        this.count = evt.target.value.length || '0';\r\n    }\r\n}\r\ndefineSquidElement('squid-character-count',SquidCharacterCount);\n\nexport { SquidCharacterCount };\n"],"names":["css_248z","css","SquidCharacterCount","BaseElement","value","selector","parentHost","findSahdowRoot","html","input","evt","defineSquidElement"],"mappings":"oMAKA,IAAIA,EAAWC,IAWf,MAAMC,UAA4BC,CAAY,CAC1C,WAAW,QAAS,CAChB,MAAO,CAACH,CAAQ,CACnB,CACD,WAAW,YAAa,CACpB,MAAO,CACH,IAAI,CAAC,KAAK,MAAM,EAChB,MAAM,CAAC,KAAK,MAAM,EAClB,GAAG,CAAC,KAAK,MAAM,CAC3B,CACK,CACD,IAAI,IAAK,CACL,OAAO,KAAK,GACf,CACD,IAAI,GAAGI,EAAO,CACV,KAAK,IAAMA,EACX,MAAMC,EAAW,sBAAsBD,MACjCE,EAAaC,EAAe,IAAI,EAElC,WADDD,EACY,IAAI,CACX,KAAK,UAAYA,EAAW,cAAc,OAAO,EAC9C,KAAK,YAAc,OAClB,KAAK,UAAYA,EAAW,cAAc,UAAU,GAExD,KAAK,WAAW,KAAK,SAAS,CAC9C,EAEuB,IAAM,CACb,KAAK,UAAY,SAAS,cAAcD,CAAQ,EAChD,KAAK,WAAW,KAAK,SAAS,EAC9B,KAAK,MAAQ,KAAK,UAAY,KAAK,UAAU,MAAM,OAAO,SAAU,EAAC,CACrF,CANa,CAQR,CACD,QAAQ,CACJ,OAAOG;AAAAA;AAAAA,qCAEsB,KAAK,uCAAuC,KAAK;AAAA;AAAA,SAGjF,CACD,WAAWC,EAAO,CACXA,IACC,KAAK,MAAQA,EAAM,MAAM,OAAO,SAAQ,EACxCA,EAAM,iBAAiB,QAAQ,KAAK,YAAY,KAAK,IAAI,CAAC,EAC1D,KAAK,IAAM,KAAK,KAAOA,EAAM,UAEpC,CACD,YAAYC,EAAK,CACb,KAAK,MAAQA,EAAI,OAAO,MAAM,QAAU,GAC3C,CACL,CACAC,EAAmB,wBAAwBT,CAAmB;;;;"}