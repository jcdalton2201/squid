import{S as m}from"./squid-ssn-260f90cd.js";import{d as h}from"./defineSquidElement-344f2f43.js";import{i as p}from"./lit-element-2d3d1b94.js";import"./squid-input-3d76c19e.js";import"./squid-input-base-50233efb.js";import"./baseElement-49f2f951.js";import"./findParentForm-f0d0b1da.js";import"./squidEvents-397fab83.js";var _=p``;class f extends m{static get styles(){return[...super.styles,_]}static get properties(){return{...super.properties}}constructor(){super(),this.name="ccnumber",this.autocomplete="cc-number"}firstUpdated(){super.firstUpdated(),this._placeholder="****************",this.minlength=16,this.maxlength=16,console.log(this.value)}_addMask(e=""){const t="-",a=this._unmask(e).slice(0,16).padEnd(16,t);let r="";return r+=a,this.maskedValue=a,r}_unmask(e=""){return e.replace(/\D/g,"").slice(0,16)}async _mask(e="",t={}){const s=this._unmask(e),a=this._addMask(s),r=t.inputType==="deleteContentBackward";this.unmaskedValue=s,this.maskedValue=a;const l=await this._obfuscate(a),o=r?this._cachedSelection:s.length;this._manageCursor(l,o,t),this._isDelete=void 0}_manageCursor(e,t,s={}){s.inputType==="deleteContentBackward"&&(t=this._cachedSelection-1),this.__getInput().setSelectionRange(t,t)}_obfuscate(e=""){return new Promise(t=>{const s=this.__getInput();let a=e.slice(0,12).replace(/[0-9]/g,"â€¢")+e.slice(12,16);this._obfuscatedValue=a,this._value=this.unmaskedValue.slice(0,16),this.maskState==="visible"?s.value=e:s.value=this._obfuscatedValue,t(this.maskedValue)})}checkValidity(){return console.log(this.internals.form),!this._value||this._value.length<16||!this.luhnCheck(this._value)?(this.setCustomValidity("Please enter in a valid credit card number"),!1):(this.setCustomValidity(""),super.checkValidity())}luhnCheck(e){let t=0;return e=e.replace(/\D/g,""),e.split("").forEach((s,a)=>{let r=parseInt(s,10);!(a%2)&&(r*=2)>9&&(r-=9),t+=r}),t%10===0}}h("squid-credit-card",f);const D={title:"input"},k=c=>`
  <form name="userForm" autocomplete>
   <squid-credit-card name="cc-number" autocomplete="cc-number">${c.label}</squid-credit-card>
  </form>
  `,i=k.bind({});i.args={label:"Credit Card"};i.story={name:"credit-card",parameters:{argTypes:{}}};var n,u,d;i.parameters={...i.parameters,docs:{...(n=i.parameters)==null?void 0:n.docs,source:{originalSource:`args => {
  return \`
  <form name="userForm" autocomplete>
   <squid-credit-card name="cc-number" autocomplete="cc-number">\${args.label}</squid-credit-card>
  </form>
  \`;
}`,...(d=(u=i.parameters)==null?void 0:u.docs)==null?void 0:d.source}}};const w=["creditCard"];export{w as __namedExportsOrder,i as creditCard,D as default};
//# sourceMappingURL=squid-credit-card.stories-8bc2e35e.js.map
