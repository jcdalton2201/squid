{"version":3,"file":"squid-stepper.stories-c862995f.js","sources":["../../dist/squid-stepper/squid-stepper.js"],"sourcesContent":["import { css, html } from 'lit';\nimport { BaseElement } from '../utils/baseElement.js';\nimport { defineSquidElement } from '../utils/defineSquidElement.js';\n\nvar css_248z = css`#container label{color:var(--font-color-default,#4d4d4d);font-size:.75rem;letter-spacing:.5px;margin-bottom:.25rem .25rem .25rem .25rem;opacity:.9}#container .input{align-items:center;display:flex;font-size:1rem;text-align:center}#container .input button{align-items:center;border:1px solid #1a1a1a;border-radius:50%;cursor:pointer;display:flex;height:30px;justify-content:center;width:30px}#container .input button.disabled{background-color:#b3b3b3;cursor:not-allowed}#container .input button:hover{border-color:var(--color-primary-default,#0e307a)}#container .input button:focus{outline:1px auto #0d8bf2}`;\r\n\r\n/**\r\n * @tag squid-stepper\r\n * @summary The `SquidStepper` element to allow users to quickly specify a value within a given range.\r\n * @prop {String} name - Name of the form control. Submitted with the form as part of a name/value pair.\r\n * @prop {String} label - The label for the element and is visual at the top of the element.\r\n * @prop {String} value - The initial value of the control.\r\n * @event change - Event dispatch when the value has changed.\r\n * @example <squid-stepper name='stepper' label='Traveller Class' value='2'>\r\n    <option value='1'>First</option>\r\n    <option value='2'>Buisness</option>\r\n    <option value='3'>Coach</option>\r\n</squid-stepper>\r\n */\r\nclass SquidStepper extends BaseElement {\r\n    static get styles() {\r\n        return [css_248z];\r\n    }\r\n    static get properties() {\r\n        return {\r\n            name: { type: String, reflect: true },\r\n            label: {\r\n                type:String\r\n            },\r\n            value: {\r\n                type:String,\r\n                reflect: true\r\n            }\r\n        };\r\n    }\r\n    static get formAssociated(){\r\n        return true;\r\n    }\r\n    firstUpdated(){\r\n        this.buildRefs();\r\n        this._optionsObserver.observe(this, { childList: true });\r\n        if(!this.value){\r\n            this.value = this.optionsMap.keys().next().value;\r\n        }\r\n        this.__setValue();\r\n        this.__displayValue();\r\n        console.log(this.internals.form);\r\n    }\r\n    updated(){\r\n        this.__displayValue();\r\n    }\r\n    constructor() {\r\n        super();\r\n        this.internals = this.attachInternals();\r\n        this.bindMethods(['getOptions','increase','decrease','__displayValue','_manageOptions']);\r\n        this.getOptions();\r\n        this._optionsObserver = new MutationObserver(mutations => {\r\n            mutations.forEach(mutation => this._manageOptions(mutation));\r\n        });\r\n    }\r\n    getOptions(){\r\n        const options = [...this.querySelectorAll('option')].map(item => [item.value,item.text]);\r\n        this.optionsMap = new Map(options);\r\n        this.keys = [...this.optionsMap.keys()];\r\n        let maxLength = 0;\r\n        [...this.optionsMap.values()].forEach(item => {\r\n            if(item.length > maxLength){\r\n                maxLength = item.length;\r\n            }\r\n        });\r\n        this.displayLength = `${maxLength * 0.75}rem`;\r\n    }\r\n    _manageOptions(){\r\n        this.getOptions();\r\n        /*check to see if we have valid value*/\r\n        if(![...this.optionsMap.keys()].find(item => item === this.value)){\r\n            this.value = this.optionsMap.keys().next().value;\r\n        } \r\n        this.__displayValue();\r\n\r\n    }\r\n    __displayValue(){\r\n        const {increase, decrease} = this.refs;\r\n        let index = this.keys.indexOf(this.value);\r\n        decrease.classList.remove('disabled');\r\n        increase.classList.remove('disabled');\r\n        if(index === 0){\r\n            decrease.classList.add('disabled');\r\n        }\r\n        if(index === this.keys.length - 1 ){\r\n            increase.classList.add('disabled');\r\n        }\r\n        // render(html`${this.optionsMap.get(this.value)}`,valueInput);\r\n        // this.requestUpdate();\r\n    }\r\n    render(){\r\n        return html`\r\n        <div id=\"container\" data-ref=\"wrapper\">\r\n         <label class=\"stepper-label\" for=\"squid-stepper\" data-ref=\"label\">${this.label}</label>\r\n         <div class='input'>\r\n          <button class='decrease' data-ref='decrease' @click=${this.decrease} aria-label=\"decrease value\">\r\n          <svg aria-hidden=\"true\" \r\n                  focusable=\"false\"  \r\n                  data-icon=\"minus-circle\" \r\n                  role=\"img\"  \r\n                  viewBox=\"0 0 24 24\"\r\n                  height=\"18px\" \r\n                  class=\"minus-circle\"\r\n                  \r\n                  >\r\n                  <path d=\"M1.5 12A1.5 1.5 0 0 1 3 10.5h18a1.5 1.5 0 0 1 0 3H3A1.5 1.5 0 0 1 1.5 12z\"></path>\r\n          </svg>\r\n          </button>\r\n          <div class='value' data-ref='valueInput' style='width:${this.displayLength}'>${this.value}</div>\r\n          <button class='increase' @click=${this.increase} data-ref='increase' aria-label=\"increase value\">\r\n          <svg aria-hidden=\"true\" \r\n               focusable=\"false\" \r\n               data-icon=\"plus-circle\" \r\n               role=\"img\"  \r\n               viewBox=\"0 0 24 24\"\r\n               height=\"18px\" \r\n               class=\"plus-circle\">\r\n               <path d=\"M12 1.5A1.5 1.5 0 0 0 10.5 3v7.5H3a1.5 1.5 0 0 0 0 3h7.5V21a1.5 1.5 0 0 0 3 0v-7.5H21a1.5 1.5 0 0 0 0-3h-7.5V3A1.5 1.5 0 0 0 12 1.5z\"></path>\r\n            </path>\r\n          </svg>\r\n     </button>\r\n         </div>\r\n        </div>\r\n        `;\r\n    }\r\n    __setValue(){\r\n        this.internals.setFormValue(this.value);\r\n        this.dispatchEvent(new Event('change'));\r\n    }\r\n    increase(){\r\n        let index = this.keys.indexOf(this.value);\r\n        if(index < this.keys.length - 1){\r\n            this.value = this.keys[index + 1];\r\n            this.__displayValue();\r\n        }\r\n        \r\n        this.__setValue();\r\n    }\r\n    decrease(){\r\n        let index = this.keys.indexOf(this.value);\r\n        if(index > 0){\r\n            this.value = this.keys[index - 1];\r\n            this.__displayValue();\r\n        }\r\n        \r\n        this.__setValue();\r\n    }\r\n    /**\r\n     * Proxy input checkValidity\r\n     */\r\n    checkValidity() {\r\n        return true;\r\n    }\r\n    /**\r\n     * proxy input validity\r\n     */\r\n    validity() {\r\n        return true;\r\n    }\r\n    /**\r\n     * proxy input validationMessage\r\n     * @returns {String}\r\n     */\r\n    validationMessage() {\r\n        return '';\r\n    }\r\n    /**\r\n     * proxy input willValidate\r\n     * @returns {Boolean}\r\n     */\r\n    willValidate() {\r\n        return true;\r\n    }\r\n}\r\ndefineSquidElement('squid-stepper',SquidStepper);\n\nexport { SquidStepper };\n"],"names":["css_248z","css","SquidStepper","BaseElement","mutations","mutation","options","item","maxLength","increase","decrease","index","html","defineSquidElement"],"mappings":"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"}